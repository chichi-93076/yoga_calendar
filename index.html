<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="icon" type="image/png" href="./yoga_icon_s.png">
    <link rel="apple-touch-icon" href="./yoga_icon_s.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./yoga_icon_s.png">
    <title>教職員體適能瑜珈社行事曆</title>
    <style>
        /* CSS 樣式維持不變，保持原本的美觀設計 */
        body { font-family: "Noto Sans TC", sans-serif; background-color: #fff1f5; display: flex; justify-content: center; padding: 20px; margin: 0; }
        .calendar-container { width: 900px; background-color: #ffffff; border: 3px solid #ff9eb5; padding: 22px; border-radius: 22px; box-shadow: 6px 6px 0px #ff9eb5; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 18px; flex-wrap: wrap; gap: 10px; }
        .month-year { font-size: 32px; font-weight: bold; color: #ff7aa2; }
        .nav-buttons { display: flex; gap: 10px; }
        .nav-btn { padding: 8px 16px; font-size: 14px; background-color: #ff7aa2; color: #fff; border: none; border-radius: 999px; cursor: pointer; box-shadow: 2px 2px 0 #ffb3c8; }
        .nav-btn:hover { background-color: #ff5c8a; }
        .calendar-grid { display: grid; grid-template-columns: repeat(7, 1fr); border-radius: 18px; overflow: hidden; border: 2px solid #ffd0dc; }
        .day-header { background-color: #ffe4ec; text-align: center; padding: 10px 0; font-weight: bold; color: #ff5c8a; font-size: 14px; border-bottom: 2px solid #ffd0dc; }
        .day-cell { padding: 10px; min-height: 80px; position: relative; background-color: #ffffff; border-right: 1px dashed #ffd0dc; border-bottom: 1px dashed #ffd0dc; overflow: hidden; }
        .day-cell:nth-child(7n) { border-right: none; }
        .day-number { font-size: 18px; font-weight: bold; color: #1d0c50; display: inline-block; padding: 4px 10px; border-radius: 999px; margin-bottom: 6px; }
        
        /* 課程樣式 */
        .event { background-color: #ffd6e3; padding: 8px 10px; margin-top: 6px; border-radius: 14px; font-size: 12px; color: #8a2c4a; box-shadow: 3px 3px 0px #ffb3c8; line-height: 1.5; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .day-cell:has(.event) { background-image: radial-gradient(#ffe4ec 1px, transparent 1px); background-size: 14px 14px; }
        
        /* Google 按鈕 */
        .add-calendar { display: inline-flex; align-items: center; justify-content: center; margin-top: 6px; width: 24px; height: 24px; padding: 0; font-size: 14px; color: #ff7aa2; border: none; border-radius: 50%; text-decoration: none; box-shadow: none; cursor: pointer; line-height: 1; }
        .add-calendar:hover { color: #ff5c8a; }

        /* 手機版 RWD */
        @media (max-width: 768px) {
            .calendar-grid { grid-template-columns: 1fr; display: flex; flex-direction: column; gap: 14px; border: none; }
            .day-header { display: none; }
            .day-cell:not(.has-event) { display: none; }
            .day-cell { display: block; border: 2px solid #ffd0dc; border-radius: 18px; padding: 14px 16px; box-shadow: 4px 4px 0 #ffb3c8; }
            .day-cell::before { content: attr(data-day); display: block; font-size: 16px; font-weight: bold; color: #ff7aa2; margin-bottom: 8px; }
            .day-number { font-size: 20px; }
            .event { font-size: 20px; }
            .add-calendar { width: 28px; height: 28px; font-size: 16px; }
        }
    </style>
</head>
<body>

    <div class="calendar-container">
        <div class="header">
            <button class="nav-btn" id="prev-month">◀ 上一月</button>
            <div class="month-year" id="calendar-title">教職員體適能瑜珈社 2026 年 2 月份行事曆</div>
            <button class="nav-btn" id="next-month">下一月 ▶</button>
        </div>
        
        <div class="calendar-grid" id="calendar-grid"></div>
    </div>

    <script>
        const courseData = [           
            { date: "2026-02-23", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-02-26", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-02", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-05", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-09", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-12", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-16", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-19", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-23", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-26", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-03-30", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-02", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-08", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-09", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-13", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-16", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-20", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-23", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-27", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-04-30", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-05-04", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-05-07", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-05-11", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-05-14", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-05-18", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-05-21", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-05-25", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-05-28", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-06-01", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-06-04", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-06-08", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-06-11", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-06-15", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-06-18", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-06-22", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" },
            { date: "2026-06-25", start: "17:15", end: "18:05", name: "教職員體適能瑜珈社" }
        ];

        const weekDays = ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六"];
        const gridContainer = document.getElementById('calendar-grid');
        const monthNames = ["1月", "2月", "3月", "4月", "5月", "6月", "7月", "8月", "9月", "10月", "11月", "12月"];
        
        let currentMonth = new Date(2026, 1); // 預設 2 月

        function renderCalendar() {
            gridContainer.innerHTML = '';

            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();

            // 更新標題
            document.getElementById('calendar-title').textContent = `教職員體適能瑜珈社 ${year} 年 ${monthNames[month]}份行事曆`;

            // 產生標題列
            weekDays.forEach(day => {
                const header = document.createElement('div');
                header.className = 'day-header';
                header.textContent = day;
                gridContainer.appendChild(header);
            });

            // 計算起始日期（該月第一天的星期幾）
            const firstDay = new Date(year, month, 1);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());

            let currentDate = new Date(startDate);
            const totalDays = 35;

            for (let i = 0; i < totalDays; i++) {
                const dateYear = currentDate.getFullYear();
                const dateMonth = String(currentDate.getMonth() + 1).padStart(2, '0');
                const dateDay = String(currentDate.getDate()).padStart(2, '0');
                const dateStr = `${dateYear}-${dateMonth}-${dateDay}`;
                const dayOfWeek = weekDays[currentDate.getDay()];

                const cell = document.createElement('div');
                cell.className = 'day-cell';
                cell.setAttribute('data-day', dayOfWeek);

                const numDiv = document.createElement('div');
                numDiv.className = 'day-number';
                numDiv.textContent = currentDate.getDate();
                cell.appendChild(numDiv);

                const event = courseData.find(c => c.date === dateStr);

                if (event) {
                    cell.classList.add('has-event');

                    const gLink = document.createElement('a');
                    gLink.className = 'add-calendar';
                    gLink.target = '_blank';
                    gLink.textContent = '➕';
                    gLink.href = generateGoogleLink(event, '育美館韻律教室');
                    cell.appendChild(gLink);

                    const eventInfo = document.createElement('div');
                    eventInfo.className = 'event';
                    eventInfo.innerHTML = `${event.start}–${event.end}<br>育美館韻律教室`;
                    cell.appendChild(eventInfo);
                }

                gridContainer.appendChild(cell);
                currentDate.setDate(currentDate.getDate() + 1);
            }
        }

        function generateGoogleLink(event, location) {
            function toTC(dateStr, timeStr) {
                const dt = new Date(`${dateStr}T${timeStr}:00+08:00`); 
                return dt.toISOString().replace(/[-:]/g, '').split('.')[0] + 'Z';
            }

            const startUTC = toTC(event.date, event.start);
            const endUTC = toTC(event.date, event.end);
            
            const baseUrl = "https://calendar.google.com/calendar/render?action=TEMPLATE";
            const text = `&text=${encodeURIComponent(event.name)}`;
            const dates = `&dates=${startUTC}/${endUTC}`;
            const loc = `&location=${encodeURIComponent(location)}`;
            
            return baseUrl + text + dates + loc;
        }

        // 按鈕事件
        document.getElementById('prev-month').addEventListener('click', () => {
            currentMonth.setMonth(currentMonth.getMonth() - 1);
            renderCalendar();
        });

        document.getElementById('next-month').addEventListener('click', () => {
            currentMonth.setMonth(currentMonth.getMonth() + 1);
            renderCalendar();
        });

        // 初始化
        renderCalendar();
    </script>
</body>
</html>